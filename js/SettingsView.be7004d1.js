"use strict";(self["webpackChunkcontabilidade_vue"]=self["webpackChunkcontabilidade_vue"]||[]).push([[382],{9430:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var a=s(3396),l=s(9242),r=s(7139);const n={class:"container"},o={class:"row g-3"},i={class:"col-12 col-lg-4"},c={class:"card"},u=(0,a._)("div",{class:"card-header palette-2 text-white"}," Configurações da empresa ",-1),d={class:"card-body"},h=(0,a._)("label",{for:"name",class:"form-label"},"Nome da empresa",-1),m=(0,a._)("div",{class:"d-flex justify-content-end"},[(0,a._)("button",{class:"btn btn-primary btn-sm",type:"submit"},"Alterar")],-1),b={class:"col-12 col-lg-4"},p={class:"card"},y=(0,a._)("div",{class:"card-header palette-2 text-white"}," Nova categoria ",-1),g={class:"card-body"},_=(0,a._)("label",{for:"title",class:"form-label"},"Nome da categoria",-1),A=(0,a._)("div",{class:"d-flex justify-content-end"},[(0,a._)("button",{class:"btn btn-primary btn-sm"},"Adicionar categoria")],-1),v={class:"col-12 col-lg-4"},f={class:"card"},x=(0,a._)("div",{class:"card-header palette-2 text-white"}," Alterar senha ",-1),T={class:"card-body"},w=(0,a._)("label",{for:"name",class:"form-label"},"Senha atual",-1),C=(0,a._)("label",{for:"name",class:"form-label"},"Nova senha",-1),k=(0,a._)("div",{class:"d-flex justify-content-end"},[(0,a._)("button",{class:"btn btn-primary btn-sm",type:"submit"},"Confirmar")],-1);function B(e,t,s,B,D,S){const z=(0,a.up)("header-layout");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(z),(0,a._)("div",n,[(0,a._)("div",o,[(0,a._)("div",i,[(0,a._)("div",c,[u,(0,a._)("div",d,[(0,a._)("form",{onSubmit:t[1]||(t[1]=(...e)=>S.updateBusiness&&S.updateBusiness(...e))},[h,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>D.business=e),class:"form-control mb-3",id:"name"},null,512),[[l.nr,D.business]]),m,D.businessAlertText?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,r.C_)(D.businessAlertClass+" mt-2"),role:"alert"},(0,r.zw)(D.businessAlertText),3)):(0,a.kq)("",!0)],32)])])]),(0,a._)("div",b,[(0,a._)("div",p,[y,(0,a._)("div",g,[(0,a._)("form",{onSubmit:t[3]||(t[3]=(...e)=>S.createCategory&&S.createCategory(...e))},[_,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>D.title=e),class:"form-control mb-3",id:"title"},null,512),[[l.nr,D.title]]),A],32),D.categoryAlertText?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,r.C_)(D.categoryAlertClass+" mt-2"),role:"alert"},(0,r.zw)(D.categoryAlertText),3)):(0,a.kq)("",!0)])])]),(0,a._)("div",v,[(0,a._)("div",f,[x,(0,a._)("div",T,[(0,a._)("form",{onSubmit:t[6]||(t[6]=(...e)=>S.updateBusiness&&S.updateBusiness(...e))},[w,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control mb-3",id:"name","onUpdate:modelValue":t[4]||(t[4]=t=>e.senhaAtual=t)},null,512),[[l.nr,e.senhaAtual]]),C,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control mb-3",id:"name","onUpdate:modelValue":t[5]||(t[5]=t=>e.novaSenha=t)},null,512),[[l.nr,e.novaSenha]]),k,D.businessAlertText?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,r.C_)(D.businessAlertClass+" mt-2"),role:"alert"},(0,r.zw)(D.businessAlertText),3)):(0,a.kq)("",!0)],32)])])])])])])}var D=s(5445),S=s(6265),z=s.n(S),U={name:"SettingsView",components:{headerLayout:D.Z},data(){return{data:[],title:null,categoryAlertText:null,categoryAlertClass:null,businessAlertText:null,businessAlertClass:null,business:null}},created(){this.getUserData()},methods:{async getUserData(){const e=this.$store.getters.token,t={headers:{Authorization:`Bearer ${e}`}};try{const e=await z().get("https://contabilidade-unit.herokuapp.com/user/",t);this.data=e.data.msg,this.business=this.data.business}catch(s){console.error(s)}},async updateBusiness(e){e.preventDefault();const t={business:this.business},s=this.$store.getters.token,a={headers:{Authorization:`Bearer ${s}`}};z().put("https://contabilidade-unit.herokuapp.com/auth/business",t,a).then((e=>{this.categoryAlertText=e.data.msg,this.categoryAlertClass="alert alert-success",setTimeout((()=>{this.categoryAlertText=null}),3e3)})).catch((e=>{e.response?(this.categoryAlertText=e.response.data.error,this.categoryAlertClass="alert alert-danger",setTimeout((()=>{this.categoryAlertText=null}),3e3)):console.log(e)}))},async createCategory(e){e.preventDefault();const t={title:this.title},s=this.$store.getters.token,a={headers:{Authorization:`Bearer ${s}`}};z().post("https://contabilidade-unit.herokuapp.com/category/create",t,a).then((e=>{this.title=null,this.categoryAlertText=e.data.msg,this.categoryAlertClass="alert alert-success",setTimeout((()=>{this.categoryAlertText=null}),3e3)})).catch((e=>{e.response?(this.categoryAlertText=e.response.data.error,this.categoryAlertClass="alert alert-danger",setTimeout((()=>{this.categoryAlertText=null}),3e3)):console.log(e)}))}}},$=s(89);const V=(0,$.Z)(U,[["render",B]]);var N=V}}]);
//# sourceMappingURL=SettingsView.be7004d1.js.map